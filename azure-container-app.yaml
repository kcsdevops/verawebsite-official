# Azure Container Apps Configuration
# Arquivo de configuraﾃｧﾃ｣o para deploy no Azure Container Apps

# 噫 DEPLOY PARA AZURE CONTAINER APPS
# Versﾃ｣o otimizada para menor custo e recursos

# 1. CONFIGURAﾃﾃグ DO CONTAINER APP
location: "East US"  # Regiﾃ｣o de menor custo
resourceGroup: "rg-veracare-prod"
containerAppName: "veracare-app"
environmentName: "veracare-env"

# 2. CONFIGURAﾃﾃグ DE RECURSOS (Mﾃ康IMO)
cpu: 0.25         # 0.25 CPU cores (menor custo)
memory: "0.5Gi"   # 0.5 GB RAM (mﾃｭnimo necessﾃ｡rio)
minReplicas: 0    # Scale to zero quando nﾃ｣o usar
maxReplicas: 2    # Mﾃ｡ximo 2 instﾃ｢ncias

# 3. CONFIGURAﾃﾃグ DE REDE
ingress:
  external: true
  targetPort: 3000
  allowInsecure: false

# 4. VARIﾃ〃EIS DE AMBIENTE (PRODUﾃﾃグ)
env:
  - name: NODE_ENV
    value: "production"
  - name: NEXTAUTH_URL
    value: "https://veracare-app.politeocean-12345678.eastus.azurecontainerapps.io"
  - name: NEXTAUTH_SECRET
    secretRef: "nextauth-secret"
  - name: JWT_SECRET
    secretRef: "jwt-secret"
  - name: ADMIN_PASSWORD_HASH
    secretRef: "admin-password"

# 5. SECRETS (CONFIGURAR NO AZURE)
secrets:
  - name: "nextauth-secret"
    value: ""  # Gerar chave forte de 32+ caracteres
  - name: "jwt-secret" 
    value: ""  # Gerar chave forte de 32+ caracteres
  - name: "admin-password"
    value: ""  # Hash bcrypt da senha AdminVeraCare2025!

# 6. ESTIMATIVA DE CUSTO MENSAL
# CPU: 0.25 cores x 24h x 30 dias = ~$5-10/mﾃｪs
# RAM: 0.5GB x 24h x 30 dias = ~$2-5/mﾃｪs
# Ingress: ~$1-2/mﾃｪs
# TOTAL ESTIMADO: $8-17/mﾃｪs USD